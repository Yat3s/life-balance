<view class="border border-solid border-gray-200 p-4 rounded-lg">
  <!-- Parking -->
  <view bindtap="refresh">
    <view class="flex items-center justify-between">
      <view class="font-bold text-sm">Parking Space</view>
      <image class="w-6 h-6 {{loadingParkingSpace ? 'animation-rotate' : ''}}" src="/images/ic_refresh.png"></image>
    </view>

    <view wx:if="{{lastParkingFullTimeStr}}" class="mt-2">
      <view class="text-xs text-gray">{{lastParkingFullTimeStr}}</view>
    </view>

    <view class="mt-4 flex flex-col gap-4 items-start justify-between">
      <view class="flex w-full items-center gap-1 justify-between">
        <!-- B25 -->
        <view class="flex gap-2dot5 items-center">
          <progressRing targetProgress="{{parkingSpace.b25.usedPercent}}" initialColor="{{ parkingSpace.b25.initialColor }}" finalColor="{{ parkingSpace.b25.finalColor }}" progressDuration="{{ parkingSpace.b25.progressDuration }}" colorChangeDuration="{{ parkingSpace.b25.colorChangeDuration }}">
            <view class="flex flex-col items-center">
              <image src="/images/ic_car_parking.png" class="w-6 h-auto" mode="widthFix" />
            </view>
          </progressRing>
          <view>
            <view class="text-xs text-gray mb-1">
              B25 - 剩余车位
            </view>
            <view class="flex items-baseline">
              <view class="text-2xl font-bold {{parkingSpace.b25.remaining === 0 ? 'text-gray-400' : ''}}">{{parkingSpace.b25.remaining}}</view>
              <view class="text-gray">/{{parkingConfig.b25.maxSpaces}}</view>
            </view>
          </view>
        </view>

        <!-- Zhongmeng -->
        <view class="flex gap-2dot5 items-center">
          <progressRing targetProgress="{{ parkingSpace.zhongmeng.usedPercent }}" initialColor="{{ parkingSpace.zhongmeng.initialColor }}" finalColor="{{ parkingSpace.zhongmeng.finalColor }}" progressDuration="{{ parkingSpace.zhongmeng.progressDuration }}" colorChangeDuration="{{ parkingSpace.zhongmeng.colorChangeDuration }}">
            <view class="flex flex-col items-center">
              <image src="/images/ic_car_parking.png" class="w-6 h-auto" mode="widthFix" />
            </view>
          </progressRing>
          <view>
            <view class="text-xs text-gray mb-1">
              中盟 - 剩余车位
            </view>
            <view class="flex items-baseline">
              <view class="text-2xl font-bold {{parkingSpace.zhongmeng.remaining === 0 ? 'text-gray-400' : ''}}">{{parkingSpace.zhongmeng.remaining}}</view>
              <view class="text-gray">/{{parkingConfig.zhongmeng.maxSpaces}}</view>
            </view>
          </view>
        </view>

      </view>

      <block wx:if="{{showParkingFullTip}}">
        <!-- Divider -->
        <view class="border-dashed border-0 border-b-2 border-gray-200 w-full"></view>

        <!-- Parking Full Tip -->
        <view class="flex items-center gap-2">
          <view class="text-gray text-xs">车位已满？</view>
          <view bind:tap="toParkingTip" class="py-1 px-2 bg-link rounded-full flex items-center text-xs text-link">
            其他停车方案
          </view>
          <view bind:tap="toShuttleTip" class="py-1 px-2 bg-link rounded-full flex items-center text-xs text-link">
            <view>
              中盟
            </view>
            <image class="w-3 h-3 mx-1" src="/images/ic_switch_blue.png"></image>
            <view>
              B25 接驳车
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>
</view>